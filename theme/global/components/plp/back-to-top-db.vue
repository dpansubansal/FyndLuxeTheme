<template>
    <div class="b2topx">
        <transition name="fade">
            <div id="pagetop" style="cursor: pointer; " v-show="scY > 300" @click="toTop">
                <svg v-if="!isTab()" width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g filter="url(#filter0_d_8354_23579)">
                        <rect x="4" y="2" width="32" height="32" rx="16" fill="white" shape-rendering="crispEdges" />
                        <path fill-rule="evenodd" clip-rule="evenodd"
                            d="M20.1586 24C19.8825 23.9998 19.6588 23.7758 19.659 23.4996L19.6666 12.7064L15.8539 16.5122C15.6584 16.7074 15.3419 16.7071 15.1468 16.5116C14.9517 16.3162 14.952 15.9996 15.1474 15.8045L19.8141 11.1462C20.0093 10.9514 20.3254 10.9514 20.5206 11.1462L25.1872 15.8045C25.3827 15.9996 25.3829 16.3162 25.1879 16.5116C24.9928 16.7071 24.6762 16.7074 24.4807 16.5122L20.6666 12.7049L20.659 23.5004C20.6588 23.7765 20.4348 24.0002 20.1586 24Z"
                            fill="#26201A" />
                    </g>
                    <defs>
                        <filter id="filter0_d_8354_23579" x="0" y="0" width="40" height="40"
                            filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                            <feFlood flood-opacity="0" result="BackgroundImageFix" />
                            <feColorMatrix in="SourceAlpha" type="matrix"
                                values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha" />
                            <feOffset dy="2" />
                            <feGaussianBlur stdDeviation="2" />
                            <feComposite in2="hardAlpha" operator="out" />
                            <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.08 0" />
                            <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_8354_23579" />
                            <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_8354_23579"
                                result="shape" />
                        </filter>
                    </defs>
                </svg>
                <svg v-else width="105" height="36" viewBox="0 0 105 36" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g filter="url(#filter0_d_8354_24725)">
                        <rect x="4" y="2" width="97" height="28" rx="14" fill="white" shape-rendering="crispEdges" />
                        <path
                            d="M13.0568 20V11.2727H16.108C16.7159 11.2727 17.2173 11.3778 17.6122 11.5881C18.0071 11.7955 18.3011 12.0753 18.4943 12.4276C18.6875 12.777 18.7841 13.1648 18.7841 13.5909C18.7841 13.9659 18.7173 14.2756 18.5838 14.5199C18.4531 14.7642 18.2798 14.9574 18.0639 15.0994C17.8509 15.2415 17.6193 15.3466 17.3693 15.4148V15.5C17.6364 15.517 17.9048 15.6108 18.1747 15.7812C18.4446 15.9517 18.6705 16.196 18.8523 16.5142C19.0341 16.8324 19.125 17.2216 19.125 17.6818C19.125 18.1193 19.0256 18.5128 18.8267 18.8622C18.6278 19.2116 18.3139 19.4886 17.8849 19.6932C17.456 19.8977 16.8977 20 16.2102 20H13.0568ZM14.1136 19.0625H16.2102C16.9006 19.0625 17.3906 18.929 17.6804 18.6619C17.973 18.392 18.1193 18.0653 18.1193 17.6818C18.1193 17.3864 18.044 17.1136 17.8935 16.8636C17.7429 16.6108 17.5284 16.4091 17.25 16.2585C16.9716 16.1051 16.642 16.0284 16.2614 16.0284H14.1136V19.0625ZM14.1136 15.108H16.0739C16.392 15.108 16.679 15.0455 16.9347 14.9205C17.1932 14.7955 17.3977 14.6193 17.5483 14.392C17.7017 14.1648 17.7784 13.8977 17.7784 13.5909C17.7784 13.2074 17.6449 12.8821 17.3778 12.6151C17.1108 12.3452 16.6875 12.2102 16.108 12.2102H14.1136V15.108ZM22.6513 20.1534C22.2365 20.1534 21.8601 20.0753 21.522 19.919C21.1839 19.7599 20.9155 19.5312 20.7166 19.233C20.5178 18.9318 20.4183 18.5682 20.4183 18.142C20.4183 17.767 20.4922 17.4631 20.6399 17.2301C20.7876 16.9943 20.9851 16.8097 21.2322 16.6761C21.4794 16.5426 21.7521 16.4432 22.0504 16.3778C22.3516 16.3097 22.6541 16.2557 22.9581 16.2159C23.3558 16.1648 23.6783 16.1264 23.9254 16.1009C24.1754 16.0724 24.3572 16.0256 24.4709 15.9602C24.5874 15.8949 24.6456 15.7812 24.6456 15.6193V15.5852C24.6456 15.1648 24.5305 14.8381 24.3004 14.6051C24.0732 14.3722 23.728 14.2557 23.2649 14.2557C22.7848 14.2557 22.4084 14.3608 22.1357 14.571C21.8629 14.7812 21.6712 15.0057 21.5604 15.2443L20.6058 14.9034C20.7763 14.5057 21.0036 14.196 21.2876 13.9744C21.5746 13.75 21.8871 13.5937 22.2251 13.5057C22.5661 13.4148 22.9013 13.3693 23.2308 13.3693C23.4411 13.3693 23.6825 13.3949 23.9553 13.446C24.2308 13.4943 24.4964 13.5952 24.7521 13.7486C25.0107 13.902 25.2251 14.1335 25.3956 14.4432C25.5661 14.7528 25.6513 15.1676 25.6513 15.6875V20H24.6456V19.1136H24.5945C24.5263 19.2557 24.4126 19.4077 24.2536 19.5696C24.0945 19.7315 23.8828 19.8693 23.6186 19.983C23.3544 20.0966 23.032 20.1534 22.6513 20.1534ZM22.8047 19.25C23.2024 19.25 23.5376 19.1719 23.8104 19.0156C24.0859 18.8594 24.2933 18.6577 24.4325 18.4105C24.5746 18.1634 24.6456 17.9034 24.6456 17.6307V16.7102C24.603 16.7614 24.5092 16.8082 24.3643 16.8509C24.2223 16.8906 24.0575 16.9261 23.87 16.9574C23.6854 16.9858 23.505 17.0114 23.3288 17.0341C23.1555 17.054 23.0149 17.071 22.907 17.0852C22.6456 17.1193 22.4013 17.1747 22.174 17.2514C21.9496 17.3253 21.7678 17.4375 21.6286 17.5881C21.4922 17.7358 21.424 17.9375 21.424 18.1932C21.424 18.5426 21.5533 18.8068 21.8118 18.9858C22.0732 19.1619 22.4041 19.25 22.8047 19.25ZM30.146 20.1364C29.5323 20.1364 29.0039 19.9915 28.5607 19.7017C28.1175 19.4119 27.7766 19.0128 27.538 18.5043C27.2994 17.9957 27.18 17.4148 27.18 16.7614C27.18 16.0966 27.3022 15.5099 27.5465 15.0014C27.7937 14.4901 28.1374 14.0909 28.5778 13.804C29.021 13.5142 29.538 13.3693 30.1289 13.3693C30.5891 13.3693 31.0039 13.4545 31.3732 13.625C31.7425 13.7955 32.0451 14.0341 32.2809 14.3409C32.5167 14.6477 32.663 15.0057 32.7198 15.4148H31.7141C31.6374 15.1165 31.467 14.8523 31.2028 14.6222C30.9414 14.3892 30.5891 14.2727 30.146 14.2727C29.7539 14.2727 29.4102 14.375 29.1147 14.5795C28.8221 14.7812 28.5934 15.0668 28.4286 15.4361C28.2667 15.8026 28.1857 16.233 28.1857 16.7273C28.1857 17.233 28.2653 17.6733 28.4244 18.0483C28.5863 18.4233 28.8136 18.7145 29.1062 18.9219C29.4016 19.1293 29.7482 19.233 30.146 19.233C30.4073 19.233 30.6445 19.1875 30.8576 19.0966C31.0707 19.0057 31.2511 18.875 31.3988 18.7045C31.5465 18.5341 31.6516 18.3295 31.7141 18.0909H32.7198C32.663 18.4773 32.5224 18.8253 32.2979 19.1349C32.0763 19.4418 31.7823 19.6861 31.4158 19.8679C31.0522 20.0469 30.6289 20.1364 30.146 20.1364ZM35.1275 17.6136L35.1104 16.3693H35.315L38.1786 13.4545H39.4229L36.3718 16.5398H36.2866L35.1275 17.6136ZM34.19 20V11.2727H35.1957V20H34.19ZM38.3491 20L35.7923 16.7614L36.5082 16.0625L39.6275 20H38.3491ZM46.9389 13.4545V14.3068H43.5469V13.4545H46.9389ZM44.5355 11.8864H45.5412V18.125C45.5412 18.4091 45.5824 18.6222 45.6648 18.7642C45.75 18.9034 45.858 18.9972 45.9886 19.0455C46.1222 19.0909 46.2628 19.1136 46.4105 19.1136C46.5213 19.1136 46.6122 19.108 46.6832 19.0966C46.7543 19.0824 46.8111 19.071 46.8537 19.0625L47.0582 19.9659C46.9901 19.9915 46.8949 20.017 46.7727 20.0426C46.6506 20.071 46.4957 20.0852 46.3082 20.0852C46.0241 20.0852 45.7457 20.0241 45.473 19.902C45.2031 19.7798 44.9787 19.5938 44.7997 19.3438C44.6236 19.0938 44.5355 18.7784 44.5355 18.3977V11.8864ZM51.0405 20.1364C50.4496 20.1364 49.9311 19.9957 49.4851 19.7145C49.0419 19.4332 48.6953 19.0398 48.4453 18.5341C48.1982 18.0284 48.0746 17.4375 48.0746 16.7614C48.0746 16.0795 48.1982 15.4844 48.4453 14.9759C48.6953 14.4673 49.0419 14.0724 49.4851 13.7912C49.9311 13.5099 50.4496 13.3693 51.0405 13.3693C51.6314 13.3693 52.1484 13.5099 52.5916 13.7912C53.0376 14.0724 53.3842 14.4673 53.6314 14.9759C53.8814 15.4844 54.0064 16.0795 54.0064 16.7614C54.0064 17.4375 53.8814 18.0284 53.6314 18.5341C53.3842 19.0398 53.0376 19.4332 52.5916 19.7145C52.1484 19.9957 51.6314 20.1364 51.0405 20.1364ZM51.0405 19.233C51.4893 19.233 51.8587 19.1179 52.1484 18.8878C52.4382 18.6577 52.6527 18.3551 52.7919 17.9801C52.9311 17.6051 53.0007 17.1989 53.0007 16.7614C53.0007 16.3239 52.9311 15.9162 52.7919 15.5384C52.6527 15.1605 52.4382 14.8551 52.1484 14.6222C51.8587 14.3892 51.4893 14.2727 51.0405 14.2727C50.5916 14.2727 50.2223 14.3892 49.9325 14.6222C49.6428 14.8551 49.4283 15.1605 49.2891 15.5384C49.1499 15.9162 49.0803 16.3239 49.0803 16.7614C49.0803 17.1989 49.1499 17.6051 49.2891 17.9801C49.4283 18.3551 49.6428 18.6577 49.9325 18.8878C50.2223 19.1179 50.5916 19.233 51.0405 19.233ZM61.7631 13.4545V14.3068H58.3711V13.4545H61.7631ZM59.3597 11.8864H60.3654V18.125C60.3654 18.4091 60.4066 18.6222 60.489 18.7642C60.5742 18.9034 60.6822 18.9972 60.8129 19.0455C60.9464 19.0909 61.087 19.1136 61.2347 19.1136C61.3455 19.1136 61.4364 19.108 61.5075 19.0966C61.5785 19.0824 61.6353 19.071 61.6779 19.0625L61.8825 19.9659C61.8143 19.9915 61.7191 20.017 61.5969 20.0426C61.4748 20.071 61.32 20.0852 61.1325 20.0852C60.8484 20.0852 60.57 20.0241 60.2972 19.902C60.0273 19.7798 59.8029 19.5938 59.6239 19.3438C59.4478 19.0938 59.3597 18.7784 59.3597 18.3977V11.8864ZM65.8647 20.1364C65.2738 20.1364 64.7553 19.9957 64.3093 19.7145C63.8661 19.4332 63.5195 19.0398 63.2695 18.5341C63.0224 18.0284 62.8988 17.4375 62.8988 16.7614C62.8988 16.0795 63.0224 15.4844 63.2695 14.9759C63.5195 14.4673 63.8661 14.0724 64.3093 13.7912C64.7553 13.5099 65.2738 13.3693 65.8647 13.3693C66.4556 13.3693 66.9727 13.5099 67.4158 13.7912C67.8619 14.0724 68.2085 14.4673 68.4556 14.9759C68.7056 15.4844 68.8306 16.0795 68.8306 16.7614C68.8306 17.4375 68.7056 18.0284 68.4556 18.5341C68.2085 19.0398 67.8619 19.4332 67.4158 19.7145C66.9727 19.9957 66.4556 20.1364 65.8647 20.1364ZM65.8647 19.233C66.3136 19.233 66.6829 19.1179 66.9727 18.8878C67.2624 18.6577 67.4769 18.3551 67.6161 17.9801C67.7553 17.6051 67.8249 17.1989 67.8249 16.7614C67.8249 16.3239 67.7553 15.9162 67.6161 15.5384C67.4769 15.1605 67.2624 14.8551 66.9727 14.6222C66.6829 14.3892 66.3136 14.2727 65.8647 14.2727C65.4158 14.2727 65.0465 14.3892 64.7567 14.6222C64.467 14.8551 64.2525 15.1605 64.1133 15.5384C63.9741 15.9162 63.9045 16.3239 63.9045 16.7614C63.9045 17.1989 63.9741 17.6051 64.1133 17.9801C64.2525 18.3551 64.467 18.6577 64.7567 18.8878C65.0465 19.1179 65.4158 19.233 65.8647 19.233ZM70.3658 22.4545V13.4545H71.3374V14.4943H71.4567C71.5305 14.3807 71.6328 14.2358 71.7635 14.0597C71.897 13.8807 72.0874 13.7216 72.3345 13.5824C72.5845 13.4403 72.9226 13.3693 73.3487 13.3693C73.8999 13.3693 74.3857 13.5071 74.8061 13.7827C75.2266 14.0582 75.5547 14.4489 75.7905 14.9545C76.0263 15.4602 76.1442 16.0568 76.1442 16.7443C76.1442 17.4375 76.0263 18.0384 75.7905 18.5469C75.5547 19.0526 75.228 19.4446 74.8104 19.723C74.3928 19.9986 73.9112 20.1364 73.3658 20.1364C72.9453 20.1364 72.6087 20.0668 72.3558 19.9276C72.103 19.7855 71.9084 19.625 71.772 19.446C71.6357 19.2642 71.5305 19.1136 71.4567 18.9943H71.3714V22.4545H70.3658ZM71.3544 16.7273C71.3544 17.2216 71.4268 17.6577 71.5717 18.0355C71.7166 18.4105 71.9283 18.7045 72.2067 18.9176C72.4851 19.1278 72.826 19.233 73.2294 19.233C73.6499 19.233 74.0007 19.1222 74.282 18.9006C74.5661 18.6761 74.7791 18.375 74.9212 17.9972C75.0661 17.6165 75.1385 17.1932 75.1385 16.7273C75.1385 16.267 75.0675 15.8523 74.9254 15.483C74.7862 15.1108 74.5746 14.8168 74.2905 14.6009C74.0092 14.3821 73.6555 14.2727 73.2294 14.2727C72.8203 14.2727 72.4766 14.3764 72.1982 14.5838C71.9197 14.7884 71.7095 15.0753 71.5675 15.4446C71.4254 15.8111 71.3544 16.2386 71.3544 16.7273Z"
                            fill="#26201A" />
                        <path fill-rule="evenodd" clip-rule="evenodd"
                            d="M87.1185 20.5C86.9114 20.4999 86.7436 20.3318 86.7437 20.1247L86.7494 12.0298L83.8899 14.8842C83.7433 15.0305 83.5059 15.0303 83.3596 14.8837C83.2133 14.7371 83.2135 14.4997 83.3601 14.3534L86.8601 10.8596C87.0065 10.7135 87.2435 10.7135 87.3899 10.8596L90.8899 14.3534C91.0365 14.4997 91.0367 14.7371 90.8904 14.8837C90.7441 15.0303 90.5066 15.0305 90.3601 14.8842L87.4994 12.0287L87.4937 20.1253C87.4936 20.3324 87.3256 20.5001 87.1185 20.5Z"
                            fill="#26201A" />
                    </g>
                    <defs>
                        <filter id="filter0_d_8354_24725" x="0" y="0" width="105" height="36"
                            filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                            <feFlood flood-opacity="0" result="BackgroundImageFix" />
                            <feColorMatrix in="SourceAlpha" type="matrix"
                                values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha" />
                            <feOffset dy="2" />
                            <feGaussianBlur stdDeviation="2" />
                            <feComposite in2="hardAlpha" operator="out" />
                            <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.08 0" />
                            <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_8354_24725" />
                            <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_8354_24725"
                                result="shape" />
                        </filter>
                    </defs>
                </svg>

            </div>
        </transition>
    </div>

</template>

<script>
import { detectMobileWidth } from "../../../helper/utils";
export default {
    name: "back-to-top-db",
    props: {

    },
    data() {
        return {
            scTimer: 0,
            scY: 0,
        }
    },
    mounted() {
        window.addEventListener('scroll', this.handleScroll);
    },
    methods: {
        handleScroll: function () {
            if (this.scTimer) return;
            this.scTimer = setTimeout(() => {
                this.scY = window.scrollY;
                clearTimeout(this.scTimer);
                this.scTimer = 0;
            }, 100);
        },
        toTop: function () {
            window.scrollTo({
                top: 0,
                behavior: "smooth"
            });
        },
        isTab(){
            if (detectMobileWidth()) {
                return true;
            }
            return false;
        },
    },
};
</script>

<style scoped>
/* .b2topx {
    position: sticky;
    bottom: 32px;
    float: right;
    margin-right: -40px;

    @media screen and (max-width: 768px) {
        position: fixed;
        top: 102px;
        bottom: unset;
        float: unset;
        left: 0;
        width: 100%;
        text-align: center;
    }
} */

.b2topx {
    position: fixed;
    right: 32px;
    bottom: 32px;
}

@media screen and (max-width: 768px) {
    .b2topx {
        top: 97px;     /*65px(header)+32px*/
        left: 0;
        width: 100%;
        text-align: center;
    }
}

@media screen and (max-width: 768px) {
    .b2topx{
        top: 89px;     /*65px(header)+24px*/
    }
}
</style>

